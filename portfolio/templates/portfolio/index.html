{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Sachin Pawar - Portfolio</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet" />
  <link rel="stylesheets" href="custom.css" />
  <meta name="csrf-token" content="{{ csrf_token }}">

 <style>
  html {
    scroll-behavior: smooth;
  }

  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: #0f172a; /* Dark background for contrast */
    color:rgb(5, 5, 5);
    margin: 0;
    padding: 0;
  }

  /* Navbar */
  .nav-link {
    position: relative;
    padding: 0.5rem 1rem;
    margin: 0 0.5rem;
    border: 2px solid #3b82f6;
    border-radius: 0.5rem;
    background: transparent;
    backdrop-filter: blur(4px);
    color:rgb(233, 226, 226);
    font-weight: bold;
    transition: all 0.3s ease;
  }

  .nav-link:hover {
    color: #ffffff;
    background-color: rgba(59, 130, 246, 0.2);
    box-shadow: 0 4px 12px rgba(59, 130, 246, 0.4);
  }

  .nav-link::after {
    content: '';
    position: absolute;
    bottom: -6px;
    left: 50%;
    transform: translateX(-50%);
    width: 0;
    height: 3px;
    background: #3b82f6;
    border-radius: 3px;
    transition: width 0.3s ease;
  }

  .nav-link:hover::after {
    width: 60%;
  }

  /* Header Banner */
  .header-bg {
    background-image: url("{% static 'images/Back.jpg' %}");
    background-size: cover;
    background-position: center;
    height: 230px;
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .header-overlay {
    background: rgba(0, 0, 0, 0.6);
    width: 100%;
    height: 100%;
    position: absolute;
    top: 0;
    left: 0;
    z-index: 1;
     backdrop-filter: blur(3px);
  -webkit-backdrop-filter: blur(3px);
  transition: background 0.3s ease;
  }
.header-bg:hover .header-overlay {
  background: rgba(0, 0, 0, 0.75);
}

  .profile-img {
    position: relative;
    z-index: 2;
    border: 3px solid white;
    border-radius: 9999px;
    width: 200px;
    height: 200px;
    object-fit: cover;
     box-shadow: 0 8px 15px rgba(0, 0, 0, 0.4);
  transition: transform 0.4s ease, box-shadow 0.4s ease;
  will-change: transform;
  cursor: pointer;
  }
.profile-img:hover {
  transform: scale(1.1) rotate(5deg);
  box-shadow: 0 12px 25px rgba(0, 0, 0, 0.6);
}

  /* Section Card - Transparent Glass with Bold White Content */
 .section-card {
    background: rgba(255, 255, 255, 0.05);
    backdrop-filter: blur(16px);
    border-radius: 1rem;
    padding: 2rem;
    margin: 2rem auto;
    width: 90%;
    max-width: 900px;
    border-left: 6px solid #3b82f6;
    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3);
    transition: transform 0.5s ease, box-shadow 0.5s ease;
}

.section-card * {
    color: white;
}
  .section-card:hover {
    transform: translateY(-6px);
    box-shadow: 0 16px 24px rgba(59, 130, 246, 0.25);
  }

  /* CRUD Form - Transparent and Animated */
  .crud-form {
    background: transparent;
    backdrop-filter: blur(12px);
    padding: 2rem;
    margin-top: 1.5rem;
    border-radius: 1rem;
    animation: popIn 0.6s ease;
    color: #ffffff;
    font-weight: bold;
  }

  @keyframes popIn {
    0% {
      transform: scale(0.95);
      opacity: 0;
    }
    100% {
      transform: scale(1);
      opacity: 1;
    }
  }

  .crud-form input,
  .crud-form select,
  .crud-form textarea {
    width: 100%;
    padding: 0.75rem;
    margin-bottom: 1rem;
    border: none;
    border-bottom: 2px solid #3b82f6;
    border-radius: 0;
    background-color: transparent;
    color: white;
    font-weight: bold;
    transition: border 0.3s ease, background 0.3s ease;
  }

  .crud-form input:focus,
  .crud-form select:focus,
  .crud-form textarea:focus {
    outline: none;
    border-bottom: 2px solid #60a5fa;
  }

  .crud-form button {
    background-color: #3b82f6;
    color: white;
    padding: 0.75rem 1.5rem;
    border: none;
    border-radius: 0.5rem;
    font-weight: bold;
    box-shadow: 0 4px 10px rgba(59, 130, 246, 0.3);
    transition: transform 0.2s ease, background-color 0.3s ease;
  }

  .crud-form button:hover {
    background-color: #2563eb;
    transform: scale(1.05);
  }

  /* Smooth Scroll Fade-in Animation */
  .fade-section {
    opacity: 0;
    transform: translateY(20px);
    animation: fadeInUp 0.8s ease forwards;
  }

  @keyframes fadeInUp {
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .fade-delay-1 { animation-delay: 0.2s; }
  .fade-delay-2 { animation-delay: 0.4s; }
  .fade-delay-3 { animation-delay: 0.6s; }
  
  .bg-blur {
  background-color: rgba(255, 255, 255, 0.4); /* translucent white */
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px); /* for Safari */
}

</style>

</head>

<body class="bg-fixed bg-cover bg-no-repeat bg-center" style="background-image: url('{% static 'images/background.jpg' %}')">

<div class="absolute top-4 left-4 z-20">
  {% if user.is_authenticated %}
    <form action="{% url 'logout' %}" method="post">
      {% csrf_token %}
      <button type="submit" class="bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 transition">
        Logout
      </button>
    </form>
  {% else %}
    <a href="{% url 'login' %}" class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 transition">
      Login
    </a>
  {% endif %}
</div>

  <!-- Header -->
  <header class="header-bg text-white shadow-lg flex items-center justify-between p-6 relative">
    <div class="header-overlay absolute inset-0"></div>
    <div class="relative z-10 w-full md:w-2/3">
      <h1 class="text-3xl font-bold  uppercase tracking-wide">Sachin Pawar</h1>

<p class="text-base italic mt-2 text-gray-100">
  Aspiring Cybersecurity Expert — Securing Digital Infrastructure & Driving Innovation with Integrity.
</p>

<p class="text-sm mt-2 flex flex-wrap gap-4 items-center text-gray-100">
  <span class="flex items-center gap-1 bg-blue-600 px-2 py-1 rounded">
    <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
      <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7z" />
      <circle cx="12" cy="9" r="2.5" />
    </svg>
    Vijayapura, Karnataka, India - 586203
  </span>

  <span class="flex items-center gap-1 bg-blue-600 px-2 py-1 rounded">
    <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
      <path d="M4 4h16v16H4z" fill="none"/>
      <path d="M4 4l8 8 8-8" />
    </svg>
    sachinpawar.ka@gmail.com
  </span>

  <span class="flex items-center gap-1 bg-blue-600 px-2 py-1 rounded">
    <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
      <path d="M3 5a2 2 0 012-2h2a2 2 0 012 2v2c0 .554-.224 1.053-.586 1.414L7.414 10.414A17.902 17.902 0 0013.586 16.586l2.586-2.586A2 2 0 0118 13h2a2 2 0 012 2v2a2 2 0 01-2 2h-.01C10.7 19 5 13.3 5 6.01V6a2 2 0 00-2-2z"/>
    </svg>
    +91 96630 53520
  </span>
</p>

<p class="mt-3 bg-blue-800 inline-block px-3 py-1 rounded-full text-sm text-white font-medium">
  Open to work
</p>
<p class="inline-block ml-3 text-sm text-gray-100">
  Customer Support Specialist, Technical Support Specialist, IT Help Desk Support & Systems
</p>
    </div>
    <div class="relative z-10 mt-6 md:mt-0">
      <img src="./Assets/Profil5.jpg" alt="Profile Photo" class="h-32 w-32 rounded-full profile-img" />
    </div>
    
   <div class="relative z-10 mt-6 md:mt-0 flex flex-col items-center space-y-4 ml-6">
  <!-- LinkedIn -->
  <a href="https://www.linkedin.com/in/sachinpawar-ka/" target="_blank" class="text-white hover:text-blue-500 transition-transform transform hover:scale-110">
    <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 24 24">
      <path d="M4.98 3.5A2.5 2.5 0 002.5 6a2.5 2.5 0 002.48 2.5A2.5 2.5 0 007.48 6a2.5 2.5 0 00-2.5-2.5zM2 9h6v12H2zM9 9h5.5v1.71h.08c.76-1.44 2.62-2.96 5.42-2.96 5.8 0 6.87 3.79 6.87 8.72V21H20v-7.2c0-1.72-.03-3.93-2.4-3.93-2.4 0-2.77 1.87-2.77 3.8V21H9z"/>
    </svg>
  </a>

  <!-- GitHub -->
  <a href="https://github.com/imsachinpawar" target="_blank" class="text-white hover:text-gray-400 transition-transform transform hover:scale-110">
    <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 24 24">
      <path d="M12 0C5.373 0 0 5.373 0 12c0 5.302 3.438 9.8 8.205 11.387.6.111.82-.261.82-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.386-1.333-1.754-1.333-1.754-1.09-.745.083-.729.083-.729 1.205.085 1.84 1.236 1.84 1.236 1.07 1.834 2.809 1.304 3.495.997.108-.775.42-1.305.763-1.605-2.665-.305-5.467-1.334-5.467-5.931 0-1.31.469-2.381 1.236-3.221-.124-.303-.535-1.526.117-3.176 0 0 1.008-.322 3.3 1.23A11.5 11.5 0 0112 6.844c1.02.005 2.045.138 3.002.404 2.29-1.552 3.296-1.23 3.296-1.23.654 1.65.243 2.873.12 3.176.77.84 1.235 1.911 1.235 3.221 0 4.61-2.807 5.624-5.48 5.921.43.372.814 1.102.814 2.222v3.293c0 .319.216.694.825.576C20.565 21.796 24 17.3 24 12c0-6.627-5.373-12-12-12z"/>
    </svg>
  </a>

  <!-- Instagram -->
  <a href="https://www.instagram.com/iemsachi/" target="_blank" class="text-white hover:text-pink-500 transition-transform transform hover:scale-110">
    <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 24 24">
      <path d="M12 2.163c3.204 0 3.584.012 4.85.07 1.366.062 2.633.331 3.608 1.306.976.975 1.244 2.243 1.306 3.608.058 1.266.069 1.646.069 4.85s-.012 3.584-.07 4.85c-.062 1.366-.331 2.633-1.306 3.608-.975.976-2.243 1.244-3.608 1.306-1.266.058-1.646.069-4.85.069s-3.584-.012-4.85-.07c-1.366-.062-2.633-.331-3.608-1.306-.976-.975-1.244-2.243-1.306-3.608C2.175 15.584 2.163 15.204 2.163 12s.012-3.584.07-4.85c.062-1.366.331-2.633 1.306-3.608.975-.976 2.243-1.244 3.608-1.306C8.416 2.175 8.796 2.163 12 2.163zm0-2.163C8.741 0 8.332.014 7.052.072 5.772.13 4.585.413 3.533 1.464 2.48 2.515 2.196 3.702 2.138 4.982.014 8.332 0 8.741 0 12c0 3.259.014 3.668.072 4.948.058 1.28.342 2.467 1.393 3.519 1.051 1.051 2.239 1.335 3.519 1.393 1.28.058 1.689.072 4.948.072s3.668-.014 4.948-.072c1.28-.058 2.467-.342 3.519-1.393 1.051-1.051 1.335-2.239 1.393-3.519.058-1.28.072-1.689.072-4.948s-.014-3.668-.072-4.948c-.058-1.28-.342-2.467-1.393-3.519C19.467.413 18.28.13 17 .072 15.719.014 15.309 0 12 0zm0 5.838a6.162 6.162 0 100 12.324 6.162 6.162 0 000-12.324zm0 10.162a3.999 3.999 0 110-7.998 3.999 3.999 0 010 7.998zm6.406-11.845a1.44 1.44 0 11-2.88 0 1.44 1.44 0 012.88 0z"/>
    </svg>
  </a>
</div>


  </header>

  <!-- Navigation -->
<nav class="bg-black/40 backdrop-blur-md shadow-[0_4px_12px_rgba(59,130,246,0.4)] px-6 py-4 flex flex-wrap gap-4 justify-center sticky top-0 z-50 ">
    <a href="#activity" class="nav-link text-gray-700 font-medium">Activity</a>
    <a href="#about" class="nav-link text-gray-700 font-medium">About</a>
    <a href="#experience" class="nav-link text-gray-700 font-medium">Experience</a>
    <a href="#skills" class="nav-link text-gray-700 font-medium">Skills</a>
    <a href="#learning" class="nav-link text-gray-700 font-medium">Learning</a>
    <a href="#projects" class="nav-link text-gray-700 font-medium">Projects</a>
    <a href="#certificates" class="nav-link text-gray-700 font-medium">Certificates</a>
    <a href="#education" class="nav-link text-gray-700 font-medium">Education</a>
  </nav>

  <!-- Main Content -->
  <main class="max-w-5xl mx-auto p-6">

    <section id="activity" class="section-card">
      <h2 class="text-2xl font-bold mb-4 text-gray-800 border-b pb-2">Activity</h2>
      <ul class="list-disc list-inside text-gray-700 space-y-2">
        <li>Actively working on Django + Tailwind portfolio project</li>
        <li>Learning Full Stack Development with focus on Python</li>
      </ul>
    </section>

    <section id="about" class="section-card">
      <h2 class="text-2xl font-bold mb-4 text-gray-800 border-b pb-2">About Me</h2>
      <ul class="list-disc list-inside text-gray-700 space-y-2">
        <li>Aspiring Cybersecurity Specialist with 2 years of Data Analyst experience</li>
        <li>Currently pursuing MCA, passionate about ethical hacking</li>
      </ul>
    </section>

    <section id="experience" class="section-card">
      <h2 class="text-2xl font-bold mb-4 text-gray-800 border-b pb-2">Experience</h2>
      <ul class="list-disc list-inside text-gray-700 space-y-2">
        <li>Data Analyst at Verificient Solutions Pvt. Ltd. (2 years)</li>
      </ul>
    </section>

    <section id="skills" class="section-card">
      <h2 class="text-2xl font-bold mb-4 text-gray-800 border-b pb-2">Skills</h2>
      <div class="flex flex-wrap gap-2">
       
      </div>
    </section>

    <section id="learning" class="section-card">
      <h2 class="text-2xl font-bold mb-4 text-gray-800 border-b pb-2">Ongoing Learning</h2>
      <ul class="list-disc list-inside text-gray-700 space-y-2">
        <li>Advanced Web Security Concepts</li>
        <li>Building AI Assistants with Python</li>
      </ul>
    </section>

    <section id="projects" class="section-card">
      <h2 class="text-2xl font-bold mb-4 text-gray-800 border-b pb-2">Projects</h2>
      <ul class="list-disc list-inside text-gray-700 space-y-2">
        <li>LogShield – Python-based Log Analysis Tool</li>
        <li>VisionLock – Eye Blink Authentication with Morse Code</li>
        <li>Recipe Meal Planner – Django CRUD App</li>
      </ul>
    </section>

    <section id="certificates" class="section-card">
      <h2 class="text-2xl font-bold mb-4 text-gray-800 border-b pb-2">Certificates</h2>
      <ul class="list-disc list-inside text-gray-700 space-y-2">
        <li>Ethical Hacking - Simplilearn</li>
        <li>Python Full Stack Development - Udemy</li>
      </ul>
    </section>

    <section id="education" class="section-card">
      <h2 class="text-2xl font-bold mb-4 text-gray-800 border-b pb-2">Education</h2>
      <ul class="list-disc list-inside text-gray-700 space-y-2">
        <li>MCA - Rani Channamma University (Pursuing)</li>
        <li>BSc Computer Science - Completed</li>
      </ul>
    </section>

  </main>
</body>

  <!-- CRUD Manager -->
  {% if user.is_authenticated %}
<footer class="text-center p-4 mt-12 shadow-inner text-sm text-gray-500">
  <div class="crud-bg rounded-lg shadow-xl p-6 mt-10 max-w-5xl mx-auto border border-gray-300 bg-blur transition-shadow duration-300 hover:shadow-2xl">
    <div class="crud-overlay rounded-lg p-6 border border-gray-200 bg-blur">
      <h2 class="text-2xl font-semibold mb-6 text-gray-900 border-b border-gray-300 pb-3 tracking-wide">
        Universal CRUD Manager
      </h2>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-8  bg-blur">
        <div>
          <label for="sectionSelector" class="block mb-2 text-sm font-semibold text-gray-700 tracking-wide">Select Section:</label>
          <select id="sectionSelector" class="w-full p-3 mb-5 border-2 border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-4 focus:ring-blue-400 focus:border-blue-600 transition duration-300 ease-in-out cursor-pointer">
            <option value="" selected disabled>Select a section</option>
            <option value="activity">Activity</option>
            <option value="about">About</option>
            <option value="experience">Experience</option>
            <option value="skills">Skills</option>
            <option value="learning">Learning</option>
            <option value="projects">Projects</option>
            <option value="certificates">Certificates</option>
            <option value="education">Education</option>
          </select>

          <div id="itemSelectorContainer" class="hidden">
            <label for="itemSelector" class="block mb-2 text-sm font-semibold text-gray-700 tracking-wide">Select An Existing:</label>
            <select id="itemSelector" class="w-full p-3 mb-5 border-2 border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-4 focus:ring-blue-400 focus:border-blue-600 transition duration-300 ease-in-out cursor-pointer">
              <option value="">-- Select Item --</option>
            </select>
          </div>
        </div>

        <div id="formContainer" class="border-2 border-gray-300 rounded-lg bg-blur shadow-inner p-6 min-h-[220px] transition-all duration-300 ease-in-out">
          <div id="defaultMessage" class="text-center py-12 text-gray-400 italic select-none">
            Please select a section to add or edit content
          </div>
        </div>
      </div>

      <div class="flex justify-center gap-4 mt-4">
        <button id="addButton" class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg shadow-md transition duration-300 flex items-center hidden">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V7z" clip-rule="evenodd" />
          </svg>
          Add
        </button>

        <button id="updateButton" class="bg-yellow-500 hover:bg-yellow-600 text-white px-6 py-2 rounded-lg shadow-md transition duration-300 flex items-center hidden">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor">
            <path d="M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z" />
          </svg>
          Update
        </button>

        <button id="deleteButton" class="bg-red-600 hover:bg-red-700 text-white px-6 py-2 rounded-lg shadow-md transition duration-300 flex items-center hidden">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z" clip-rule="evenodd" />
          </svg>
          Delete
        </button>
      </div>
    </div>
  </div>

  <div class="mt-6 text-gray-500">
    &copy; 2025 Sachin Pawar. All rights reserved.
  </div>
</footer>
{% endif %}


<script>
// API endpoints mapping
const API_ENDPOINTS = {
  about: "/api/about/",
  education: "/api/education/",
  skills: "/api/skills/",
  projects: "/api/projects/",
  experience: "/api/experience/",
  learning: "/api/learning/",
  activity: "/api/activity/",
  certificates: "/api/certificates/"
};

// Form templates for each section
const FORM_TEMPLATES = {
  about: `
    <div class="space-y-4">
      <div>
        <label class="block mb-1">Content:</label>
        <textarea id="aboutContent" class="w-full p-2 border rounded" rows="4" required></textarea>
      </div>
    </div>
  `,
  education: `
    <div class="space-y-4">
      <div>
        <label class="block mb-1">Degree:</label>
        <input type="text" id="eduDegree" class="w-full p-2 border rounded" required>
      </div>
      <div>
        <label class="block mb-1">Institution:</label>
        <input type="text" id="eduInstitution" class="w-full p-2 border rounded" required>
      </div>
      <div class="grid grid-cols-2 gap-4">
        <div>
          <label class="block mb-1">Start Year:</label>
          <input type="number" id="eduStart" class="w-full p-2 border rounded" required>
        </div>
        <div>
          <label class="block mb-1">End Year:</label>
          <input type="number" id="eduEnd" class="w-full p-2 border rounded">
        </div>
      </div>
      <div>
        <label class="block mb-1">Description:</label>
        <textarea id="eduDescription" class="w-full p-2 border rounded" rows="2"></textarea>
      </div>
    </div>
  `,
  skills: `
    <div class="space-y-4">
      <div>
        <label class="block mb-1">Skill Name:</label>
        <input type="text" id="skillName" class="w-full p-2 border rounded" required>
      </div>
      <div>
        <label class="block mb-1">Proficiency:</label>
        <select id="skillProficiency" class="w-full p-2 border rounded" required>
          <option value="Beginner">Beginner</option>
          <option value="Intermediate">Intermediate</option>
          <option value="Advanced">Advanced</option>
          <option value="Expert">Expert</option>
        </select>
      </div>
    </div>
  `,
  certificates: `
    <div class="space-y-4">
      <div>
        <label class="block mb-1">Title:</label>
        <input type="text" id="certTitle" class="w-full p-2 border rounded" required>
      </div>
      <div>
        <label class="block mb-1">Issued By:</label>
        <input type="text" id="certIssuer" class="w-full p-2 border rounded" required>
      </div>
      <div>
        <label class="block mb-1">Date Issued:</label>
        <input type="date" id="certDate" class="w-full p-2 border rounded" required>
      </div>
      <div>
        <label class="block mb-1">Certificate Image:</label>
        <input type="file" id="certImage" class="w-full p-2 border rounded" accept="image/*">
      </div>
    </div>
  `,
  projects: `
    <div class="space-y-4">
      <div>
        <label class="block mb-1">Project Name:</label>
        <input type="text" id="projectName" class="w-full p-2 border rounded" required>
      </div>
      <div>
        <label class="block mb-1">Description:</label>
        <textarea id="projectDesc" class="w-full p-2 border rounded" rows="3" required></textarea>
      </div>
      <div>
        <label class="block mb-1">Technologies Used:</label>
        <input type="text" id="projectTech" class="w-full p-2 border rounded" required>
      </div>
      <div>
        <label class="block mb-1">Project Link:</label>
        <input type="url" id="projectLink" class="w-full p-2 border rounded">
      </div>
      <div class="grid grid-cols-2 gap-4">
        <div>
          <label class="block mb-1">Start Date:</label>
          <input type="date" id="projectStart" class="w-full p-2 border rounded" required>
        </div>
        <div>
          <label class="block mb-1">End Date:</label>
          <input type="date" id="projectEnd" class="w-full p-2 border rounded">
        </div>
      </div>
    </div>
  `,
  experience: `
    <div class="space-y-4">
      <div>
        <label class="block mb-1">Role:</label>
        <input type="text" id="expRole" class="w-full p-2 border rounded" required>
      </div>
      <div>
        <label class="block mb-1">Company:</label>
        <input type="text" id="expCompany" class="w-full p-2 border rounded" required>
      </div>
      <div>
        <label class="block mb-1">Description:</label>
        <textarea id="expDescription" class="w-full p-2 border rounded" rows="3" required></textarea>
      </div>
      <div>
        <label class="block mb-1">Location:</label>
        <input type="text" id="expLocation" class="w-full p-2 border rounded">
      </div>
      <div class="grid grid-cols-2 gap-4">
        <div>
          <label class="block mb-1">Start Date:</label>
          <input type="date" id="expStart" class="w-full p-2 border rounded" required>
        </div>
        <div>
          <label class="block mb-1">End Date:</label>
          <input type="date" id="expEnd" class="w-full p-2 border rounded">
        </div>
      </div>
    </div>
  `,
  learning: `
    <div class="space-y-4">
      <div>
        <label class="block mb-1">Topic:</label>
        <input type="text" id="learnTopic" class="w-full p-2 border rounded" required>
      </div>
      <div>
        <label class="block mb-1">Status:</label>
        <select id="learnStatus" class="w-full p-2 border rounded" required>
          <option value="In Progress">In Progress</option>
          <option value="Completed">Completed</option>
        </select>
      </div>
      <div>
        <label class="block mb-1">Description:</label>
        <textarea id="learnDescription" class="w-full p-2 border rounded" rows="2"></textarea>
      </div>
    </div>
  `,
  activity: `
    <div class="space-y-4">
      <div>
        <label class="block mb-1">Title:</label>
        <input type="text" id="activityTitle" class="w-full p-2 border rounded" required>
      </div>
      <div>
        <label class="block mb-1">Content:</label>
        <textarea id="activityContent" class="w-full p-2 border rounded" rows="4" required></textarea>
      </div>
      <div>
        <label class="block mb-1">Date:</label>
        <input type="date" id="activityDate" class="w-full p-2 border rounded" required>
      </div>
      <div>
        <label class="block mb-1">Image:</label>
        <input type="file" id="activityImage" class="w-full p-2 border rounded" accept="image/*">
      </div>
    </div>
  `
};

// Get CSRF token for Django
function getCookie(name) {
  let cookieValue = null;
  if (document.cookie && document.cookie !== '') {
    const cookies = document.cookie.split(';');
    for (let i = 0; i < cookies.length; i++) {
      const cookie = cookies[i].trim();
      if (cookie.substring(0, name.length + 1) === (name + '=')) {
        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
        break;
      }
    }
  }
  return cookieValue;
}

// Current state
let currentSection = null;
let currentItemId = null;

// Initialize the page
document.addEventListener('DOMContentLoaded', function () {
  // Load all section data
  loadAllSectionData();

  // Section selector
  const sectionSelector = document.getElementById("sectionSelector");
  sectionSelector?.addEventListener("change", async function () {
    currentSection = this.value;
    currentItemId = null;
    await resetForm(currentSection);
  });

  // Item selector
  const itemSelector = document.getElementById("itemSelector");
  const updateButton = document.getElementById("updateButton");
  const deleteButton = document.getElementById("deleteButton");
  const addButton = document.getElementById("addButton");

  if (!itemSelector) {
    console.error("Missing: #itemSelector element");
    return;
  }

  itemSelector.addEventListener("change", function () {
    currentItemId = this.value;

    if (currentItemId) {
      try {
        if (typeof loadItemData !== 'function') throw new Error('loadItemData not defined');
        loadItemData(currentSection, currentItemId);
      } catch (error) {
        console.error('Error loading item:', error);
        alert('Failed to load item data');
      }

      // Update UI
      updateButton?.classList.remove("hidden");
      deleteButton?.classList.remove("hidden");
      addButton?.classList.add("hidden");
    } else {
      updateButton?.classList.add("hidden");
      deleteButton?.classList.add("hidden");
      addButton?.classList.remove("hidden");
      resetForm(currentSection);
    }
  });

  // Button events
  addButton?.addEventListener("click", addItem);
  updateButton?.addEventListener("click", updateItem);
  deleteButton?.addEventListener("click", deleteItem);
});

// Load all section data
async function loadAllSectionData() {
  try {
    await Promise.all(Object.keys(API_ENDPOINTS).map(section => loadSectionData(section)));
  } catch (error) {
    console.error('Error loading initial data:', error);
  }
}

// Load data for a specific section
async function loadSectionData(section) {
  try {
    const response = await fetch(API_ENDPOINTS[section]);
    if (!response.ok) throw new Error(`Failed to load ${section}`);
    const items = await response.json();
    renderSectionItems(section, items);
  } catch (error) {
    console.error(`Error loading ${section}:`, error);

    const sectionDiv = document.getElementById(section);
    if (sectionDiv) {
      let ul = sectionDiv.querySelector("ul");
      if (!ul) {
        ul = document.createElement("ul");
        ul.className = "list-disc list-inside text-gray-700 space-y-2";
        sectionDiv.appendChild(ul);
      }
      ul.innerHTML = `<li class="text-red-500">Error loading data. Please try again.</li>`;
    }
  }
}

// Render items in the section
function renderSectionItems(section, items) {
  const sectionDiv = document.getElementById(section);
  if (!sectionDiv) return;
  
  let ul = sectionDiv.querySelector("ul");
  if (!ul) {
    ul = document.createElement("ul");
    ul.className = "list-disc list-inside text-gray-700 space-y-2";
    sectionDiv.appendChild(ul);
  }
  
  ul.innerHTML = '';
  
  if (items.length === 0) {
    ul.innerHTML = '<li class="text-gray-500">No items found</li>';
    return;
  }
  
  items.forEach(item => {
    const li = document.createElement("li");
    li.dataset.id = item.id;
    
    let content = '';
    switch(section) {
      case 'about':
        content = `<span>${item.content}</span>`;
        break;
      case 'education':
        content = `<strong>${item.degree}</strong> at ${item.institution} (${item.start_year}-${item.end_year || 'Present'})`;
        if (item.description) content += `<p class="text-sm text-gray-600 mt-1">${item.description}</p>`;
        break;
      case 'skills':
        content = `${item.name} - <span class="text-blue-600">${item.proficiency}</span>`;
        break;

     case 'certificates':
  content = `<strong>${item.title}</strong> issued by ${item.issued_by} on ${new Date(item.date_issued).toLocaleDateString()}`;
  if (item.image_url) {
    content += `
      <a href="${item.image_url}" target="_blank" rel="noopener noreferrer" title="View Certificate Image">
        🖼️ <span class="text-blue-600 underline hover:text-blue-800">View Certificate</span>
      </a>`;
  }
  break;


      case 'projects':
       content = `<strong>${item.name}</strong> - ${item.description}<br>`;
content += `<small class="text-gray-500">Technologies: ${item.technologies_used}</small>`;
if (item.project_link) {
  content += `<br><a href="${item.project_link}" target="_blank" class="text-blue-600 hover:underline">View Project</a>`;
}
        break;
       case 'experience':
        content = `<strong>${item.role}</strong> at ${item.company} (${new Date(item.start_date).getFullYear()} - ${item.end_date ? new Date(item.end_date).getFullYear() : 'Present'})`;
        if (item.location) content += `, <span class="text-gray-500">${item.location}</span>`;
        if (item.description) content += `<p class="text-sm text-gray-600 mt-1">${item.description}</p>`;
        break;

      case 'learning':
        content = `<strong>${item.topic}</strong> - <span class="text-blue-600">${item.status}</span>`;
        if (item.description) content += `<p class="text-sm text-gray-600 mt-1">${item.description}</p>`;
        break;

   case 'activity':
  content = `<strong>${item.title}</strong> on ${new Date(item.date).toLocaleDateString()}`;
  if (item.content) content += `<p class="text-sm text-gray-600 mt-1">${item.content}</p>`;
  if (item.image_url) {
    content += `
      <a href="${item.image_url}" target="_blank" rel="noopener noreferrer" title="View Image">
        🔍 <span class="text-blue-600 underline hover:text-blue-800">View Image</span>
      </a>`;
  }
  break;


       
      default:
        content = item.title || item.name || item.content;
    }
    
    li.innerHTML = content;
    ul.appendChild(li);
  });
}

// Populate item selector dropdown
async function populateItems() {
  const itemSelector = document.getElementById("itemSelector");
  if (!itemSelector) {
    console.error("Element with id 'itemSelector' not found.");
    return;
  }

  // Reset dropdown with placeholder option
  itemSelector.innerHTML = '<option value="">-- Select Item --</option>';

  if (!currentSection) return;

  try {
    const response = await fetch(API_ENDPOINTS[currentSection]);
    if (!response.ok) throw new Error(`Failed to fetch items for section: ${currentSection}`);
    
    const items = await response.json();

    if (!Array.isArray(items) || items.length === 0) {
      itemSelector.innerHTML = '<option value="">No items found</option>';
      return;
    }

    const fragment = document.createDocumentFragment();

    items.forEach(item => {
      const option = document.createElement("option");
      option.value = item.id ?? "";
      option.textContent = item.title || item.name || item.degree || item.content || item.role || item.topic|| "[Untitled]";
      fragment.appendChild(option);
    });

    itemSelector.appendChild(fragment);

    // Reset selection to placeholder
    itemSelector.value = "";

  } catch (error) {
    console.error('Error populating items:', error);
    itemSelector.innerHTML = '<option value="">Error loading items</option>';
  }
}
// Load item data for editing
async function loadItemData(section, id) {
  try {
    const response = await fetch(`${API_ENDPOINTS[section]}${id}/`);
    if (!response.ok) throw new Error('Failed to fetch item');
    const item = await response.json();
    
    // Fill form based on section
    switch(section) {
      case 'about':
        document.getElementById("aboutContent").value = item.content;
        break;
      case 'education':
        document.getElementById("eduDegree").value = item.degree;
        document.getElementById("eduInstitution").value = item.institution;
        document.getElementById("eduStart").value = item.start_year;
        document.getElementById("eduEnd").value = item.end_year || '';
        document.getElementById("eduDescription").value = item.description || '';
        break;
      case 'skills':
        document.getElementById("skillName").value = item.name;
        document.getElementById("skillProficiency").value = item.proficiency;
        break;
      case 'certificates':
        document.getElementById("certTitle").value = item.title;
        document.getElementById("certIssuer").value = item.issued_by;
        document.getElementById("certDate").value = new Date(item.date_issued).toISOString().split('T')[0];
        // Note: Can't set file input value for security reasons
        break;
      case 'projects':
        document.getElementById("projectName").value = item.name;
        document.getElementById("projectDesc").value = item.description;
        document.getElementById("projectTech").value = item.technologies_used;
        document.getElementById("projectLink").value = item.project_link || '';
        document.getElementById("projectStart").value = new Date(item.start_date).toISOString().split('T')[0];
        document.getElementById("projectEnd").value = item.end_date ? new Date(item.end_date).toISOString().split('T')[0] : '';
        break;
        case 'experience':
        document.getElementById("expRole").value = item.role;
        document.getElementById("expCompany").value = item.company;
        document.getElementById("expDescription").value = item.description || '';
        document.getElementById("expStart").value = new Date(item.start_date).toISOString().split('T')[0];
        document.getElementById("expEnd").value = item.end_date ? new Date(item.end_date).toISOString().split('T')[0] : '';
        document.getElementById("expLocation").value = item.location || '';
        break;

      case 'learning':
        document.getElementById("learnTopic").value = item.topic;
        document.getElementById("learnStatus").value = item.status;
        document.getElementById("learnDescription").value = item.description || '';
        break;

      case 'activity':
        document.getElementById("activityTitle").value = item.title;
        document.getElementById("activityContent").value = item.content || '';
        document.getElementById("activityDate").value = new Date(item.date).toISOString().split('T')[0];
        // Note: File input for image cannot be set programmatically due to security restrictions
        break;

    }
  } catch (error) {
    console.error('Error loading item:', error);
    alert('Failed to load item data');
  }
}

// Reset form container with default or section-specific form template
async function resetForm(section = null) {
  const formContainer = document.getElementById("formContainer");

  if (section && FORM_TEMPLATES[section]) {
    formContainer.innerHTML = FORM_TEMPLATES[section];

    // Call populateItems after the form template is injected
    await populateItems();

    document.getElementById("addButton").classList.remove("hidden");
    document.getElementById("updateButton").classList.add("hidden");
    document.getElementById("deleteButton").classList.add("hidden");
    document.getElementById("itemSelectorContainer").classList.remove("hidden");
  } else {
    formContainer.innerHTML = `
      <div id="defaultMessage" class="text-center py-10 text-gray-500">
        Please select a section to add or edit content
      </div>`;
    
    document.getElementById("addButton").classList.add("hidden");
    document.getElementById("updateButton").classList.add("hidden");
    document.getElementById("deleteButton").classList.add("hidden");
    document.getElementById("itemSelectorContainer").classList.add("hidden");
  }
}


// Add new item
async function addItem() {
  if (!currentSection) return;
  
  try {
    const formData = new FormData();
    const jsonData = {};
    
    // Collect form data based on section
    switch(currentSection) {
      case 'about':
        jsonData.content = document.getElementById("aboutContent").value;
        break;
      case 'education':
        jsonData.degree = document.getElementById("eduDegree").value;
        jsonData.institution = document.getElementById("eduInstitution").value;
        jsonData.start_year = parseInt(document.getElementById("eduStart").value);
        jsonData.end_year = document.getElementById("eduEnd").value ? parseInt(document.getElementById("eduEnd").value) : null;
        jsonData.description = document.getElementById("eduDescription").value;
        break;
      case 'skills':
        jsonData.name = document.getElementById("skillName").value;
        jsonData.proficiency = document.getElementById("skillProficiency").value;
        break;
      case 'certificates':
        jsonData.title = document.getElementById("certTitle").value;
        jsonData.issued_by = document.getElementById("certIssuer").value;
        jsonData.date_issued = document.getElementById("certDate").value;
        const certImage = document.getElementById("certImage").files[0];
        if (certImage) {
          formData.append('image', certImage);
        }
        break;
      case 'activity':
        jsonData.title = document.getElementById("activityTitle").value;
        jsonData.content = document.getElementById("activityContent").value;
        jsonData.date = document.getElementById("activityDate").value;
        const activityImage = document.getElementById("activityImage").files[0];
        if (activityImage) {
          formData.append('image', activityImage);
        }
        break;

      case 'projects':
        jsonData.name = document.getElementById("projectName").value;
        jsonData.description = document.getElementById("projectDesc").value;
        jsonData.technologies_used = document.getElementById("projectTech").value;
        jsonData.project_link = document.getElementById("projectLink").value;
        jsonData.start_date = document.getElementById("projectStart").value;
        jsonData.end_date = document.getElementById("projectEnd").value || null;
        break;

      case 'experience':
        jsonData.role = document.getElementById("expRole").value;
        jsonData.company = document.getElementById("expCompany").value;
        jsonData.description = document.getElementById("expDescription").value;
        jsonData.start_date = document.getElementById("expStart").value;
        jsonData.end_date = document.getElementById("expEnd").value || null;
        jsonData.location = document.getElementById("expLocation").value;
        break;

      case 'learning':
        jsonData.topic = document.getElementById("learnTopic").value;
        jsonData.status = document.getElementById("learnStatus").value;
        jsonData.description = document.getElementById("learnDescription").value;
        break;

    }
    
    // For file uploads, use FormData, otherwise use JSON
    let options = {
      method: 'POST',
      headers: {
        'X-CSRFToken': getCookie('csrftoken'),
      }
    };
    
    if (formData.has('image')) {
      // Add JSON data to FormData
      console.log('jsonData before sending:', jsonData);

      for (const key in jsonData) {
        formData.append(key, jsonData[key]);
      }
      options.body = formData;
    } else {
      options.headers['Content-Type'] = 'application/json';
      options.body = JSON.stringify(jsonData);
    }
    
    const response = await fetch(API_ENDPOINTS[currentSection], options);
    
    if (!response.ok) {
const errorData = await response.json();
console.error("Backend validation error:", errorData);
throw new Error(JSON.stringify(errorData));
    }
    
    const newItem = await response.json();
    loadSectionData(currentSection);
    populateItems();
    resetForm(currentSection);
    alert("Item added successfully!");
  } catch (error) {
    console.error('Error:', error);
    alert(`Error: ${error.message}`);
  }
}

// Update existing item
async function updateItem() {
  if (!currentSection || !currentItemId) return;
  
  try {
    const formData = new FormData();
    const jsonData = {};
    
    // Collect form data based on section
    switch(currentSection) {
  case 'about':
    jsonData.content = document.getElementById("aboutContent").value;
    break;

  case 'education':
    jsonData.degree = document.getElementById("eduDegree").value;
    jsonData.institution = document.getElementById("eduInstitution").value;
    jsonData.start_year = parseInt(document.getElementById("eduStart").value);
    jsonData.end_year = document.getElementById("eduEnd").value ? parseInt(document.getElementById("eduEnd").value) : null;
    jsonData.description = document.getElementById("eduDescription").value;
    break;

  case 'skills':
    jsonData.name = document.getElementById("skillName").value;
    jsonData.proficiency = document.getElementById("skillProficiency").value;
    break;

  case 'certificates':
    jsonData.title = document.getElementById("certTitle").value;
    jsonData.issued_by = document.getElementById("certIssuer").value;
    jsonData.date_issued = document.getElementById("certDate").value;
    const certImage = document.getElementById("certImage").files[0];
    if (certImage) {
      formData.append('image', certImage);
    }
    break;

  case 'projects':
    jsonData.name = document.getElementById("projectName").value;
    jsonData.description = document.getElementById("projectDesc").value;
    jsonData.technologies_used = document.getElementById("projectTech").value;
    jsonData.project_link = document.getElementById("projectLink").value;
    jsonData.start_date = document.getElementById("projectStart").value;
    jsonData.end_date = document.getElementById("projectEnd").value || null;
    break;

  case 'experience':
    jsonData.role = document.getElementById("expRole").value;
    jsonData.company = document.getElementById("expCompany").value;
    jsonData.description = document.getElementById("expDescription").value;
    jsonData.start_date = document.getElementById("expStart").value;
    jsonData.end_date = document.getElementById("expEnd").value || null;
    jsonData.location = document.getElementById("expLocation").value;
    break;

  case 'learning':
    jsonData.topic = document.getElementById("learnTopic").value;
    jsonData.status = document.getElementById("learnStatus").value;
    jsonData.description = document.getElementById("learnDescription").value;
    break;

  case 'activity':
    jsonData.title = document.getElementById("activityTitle").value;
    jsonData.content = document.getElementById("activityContent").value;
    jsonData.date = document.getElementById("activityDate").value;
    const activityImage = document.getElementById("activityImage").files[0];
    if (activityImage) {
      formData.append('image', activityImage);
    }
    break;

  default:
    console.warn("Unknown section: " + currentSection);
  }

    let options = {
      method: 'PUT',
      headers: {
        'X-CSRFToken': getCookie('csrftoken'),
      }
    };
    
    if (formData.has('image')) {
      for (const key in jsonData) {
        formData.append(key, jsonData[key]);
      }
      options.body = formData;
    } else {
      options.headers['Content-Type'] = 'application/json';
      options.body = JSON.stringify(jsonData);
    }
    
    const response = await fetch(`${API_ENDPOINTS[currentSection]}${currentItemId}/`, options);
    
    if (!response.ok) {
      const errorData = await response.json();
      throw new Error(errorData.error || 'Failed to update item');
    }
    
    loadSectionData(currentSection);
    alert("Item updated successfully!");
  } catch (error) {
    console.error('Error:', error);
    alert(`Error: ${error.message}`);
  }
}

// Delete item
async function deleteItem() {
  if (!currentSection || !currentItemId) return;
  
  if (!confirm("Are you sure you want to delete this item?")) return;
  
  try {
    const response = await fetch(`${API_ENDPOINTS[currentSection]}${currentItemId}/`, {
      method: 'DELETE',
      headers: {
        'X-CSRFToken': getCookie('csrftoken'),
      },
    });
    
    if (!response.ok) {
      const errorData = await response.json();
      throw new Error(errorData.error || "Failed to delete item.");
    }
    
    loadSectionData(currentSection);
    populateItems();
    resetForm(currentSection);
    alert("Item deleted successfully!");
  } catch (error) {
    console.error("Delete error:", error);
    alert(`Delete failed: ${error.message}`);
  }
}

</script>
</body>
</html>
